<% layout('layouts/boilerplate') %>
    <div id="cluster-map"></div>
    <div class="container">
    <h1>All Campgrounds</h1>
    
        <% for(let campground of campgrounds) { %>
           <div class="card mb-3 shadow p-3 mb-5 bg-white rounded">
               <div class="row">
                   <div class="col-md-4">
                       <% if(campground.images.length) { %> 
                        <img src="<%=campground.images[0].url%>" alt="" class="img-fluid img-thumbnail">
                        <% } else {%> 
                            <img src="https://res.cloudinary.com/dbjonv3p0/image/upload/w_200/v1642007535/YelpCamp/uqtankkypts2aaqxbrvi.jpg" alt="" class="img-fluid img-thumbnail">
                            <% } %> 
                   </div>
                   <div class="col-md-8">
                       <div class="card-body">
                           <h5 class="card-title">
                               <%= campground.title %> 
                           </h5>
                           <p class="card-text"> <%= campground.description %> </p>
                           <p class="card-text"> <small class="text-muted"><%= campground.location %> </small> </p>
                           <a href="/campgrounds/<%=campground._id%>" class="btn btn-primary">View <%= campground.title %> </a>
                       </div>
                   </div>
               </div>
           </div>
        <% } %>
    </div>  
<script>
    const mapToken = '<%- process.env.MAPBOX_TOKEN %>';
    const campgrounds = {features: <%- JSON.stringify(campgrounds)%>}
</script>

<script src="/scripts/indexClusterMap.js"></script>
